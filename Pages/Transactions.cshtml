@page
@model BetsiApp.Pages.TransactionsModel

<h1 class="text-center mt-3">Transakcije</h1>

<div>
    <span class="fw-bold">Trenutno stanje denarja:</span> @Model.Balance.ToString("F2") â‚¬
</div>

<form method="post" asp-page-handler="AddMoney" class="mt-3">
    <input asp-for="Amount" type="number" step="0.01" placeholder="Vnesite znesek" class="form-control w-25 d-inline" />
    <button type="submit" class="btn btn-primary ms-2">Dodaj denar</button>
</form>

<form method="post" asp-page-handler="Withdraw" class="mt-3">
    <input asp-for="Amount" type="number" step="0.01" placeholder="Vnesite znesek" class="form-control w-25 d-inline" />
    <button type="submit" class="btn btn-danger ms-2">Dvigni denar</button>
</form>

@if (!string.IsNullOrEmpty(Model.Message))
{
    <div class="alert alert-info mt-3">@Model.Message</div>
}

@if (Model.History.Any())
{
    <h3 class="mt-4">Zgodovina transakcij</h3>
    <ul class="list-unstyled">
        @foreach (var item in Model.History)
        {
            if (item.Type == "Deposit")
            {
                <li class="alert alert-primary">
                    + @item.Amount.ToString("F2") â‚¬ (polog)
                    <br />
                    <small>@item.Date.ToString("dd.MM.yyyy HH:mm")</small>
                </li>
            }
            else if (item.Type == "Withdraw")
            {
                <li class="alert alert-warning">
                    - @item.Amount.ToString("F2") â‚¬ (dvig)
                    <br />
                    <small>@item.Date.ToString("dd.MM.yyyy HH:mm")</small>
                </li>
            }
            else if (item.Type == "Bet")
            {
                <li class="alert alert-secondary">
                    ðŸŽ² @item.Description â€” @item.Amount.ToString("F2") â‚¬
                    <br />
                    <small>@item.Date.ToString("dd.MM.yyyy HH:mm")</small>
                </li>
            }
        }
    </ul>
}